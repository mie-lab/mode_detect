# Travel mode detection

This repository represents the implementation of the paper:

## [Evaluating geospatial context information for travel mode detection]()
[Ye Hong](https://scholar.google.com/citations?user=dnaRSnwAAAAJ&hl=en), [Emanuel St√ºdeli](), [Martin Raubal](https://raubal.ethz.ch/)\
[IKG, ETH Zurich](https://gis.ethz.ch/en/)

![flowchart](fig/shap_overall.png?raw=True)

## Requirements and dependencies

This code has been tested on

- Python 3.10.9, Geopandas 0.12.2, trackintel 1.1.13, shap 0.41.0, scikit-learn 1.2.2

To create a virtual environment and install the required dependences please run:
```shell
    git clone https://github.com/hong2223/mode_detect
    cd mode-detect
    conda env create -f environment.yml
    conda activate mode-detect
```
in your working folder.

## Inputs and Parameters
Require `stage` data with validated travel mode labels and LineString geometries as input. You can check `0_load\import_data.py` for reading data from PostGIS database and the corresponding data format. In addition, the processing scripts require the following input data and parameters:
- `1_preprocess`: staypoints data for calculating user tracking quality; area shapefile for geographical filtering; stages quality parameters (tracking, length, speed for each mode, etc.) for quality filtering.
- `2_feature_extraction`: geospatial context data (from OSM, Swiss Map Vector 25, or any other open-source data provider).
- `3_rf_importance`: search space for hyper-parameter search.

intermediate files will be stored into `./data/` folder. Figures generated by the scripts will be stored into `./fig/` folder.


## Contact
If you have any questions, please open an issue or let me know: 
- Ye Hong {hongy@ethz.ch}
